(function(e){e.expander={version:"1.4.7",defaults:{slicePoint:100,preserveWords:true,widow:4,expandText:"read more",expandPrefix:"&hellip; ",expandAfterSummary:false,summaryClass:"summary",detailClass:"details",moreClass:"read-more",lessClass:"read-less",collapseTimer:0,expandEffect:"slideDown",expandSpeed:250,collapseEffect:"slideUp",collapseSpeed:200,userCollapse:false,userCollapseText:"read less",userCollapsePrefix:" ",onSlice:null,beforeExpand:null,afterExpand:null,onCollapse:null,afterCollapse:null}};e.fn.expander=function(t){function v(e,t){var n="span",r=e.summary;if(t){n="div"}r='<div class="'+e.summaryClass+'">'+r+"</div>"+e.moreLabel;return[r," <",n+' class="'+e.detailClass+'"',">",e.details,"</"+n+">"].join("")}function m(e){var t='<span class="'+e.moreClass+'">';t+='<a href="#">'+e.expandText+"</a></span>";return t}function g(t,n){if(t.lastIndexOf("<")>t.lastIndexOf(">")){t=t.slice(0,t.lastIndexOf("<"))}if(n){t=t.replace(s,"")}return e.trim(t)}function y(e,t){t.stop(true,true)[e.collapseEffect](e.collapseSpeed,function(){var n=t.prev("span."+e.moreClass).show();if(n.length){t.parent().children("div."+e.summaryClass).show().find("span."+e.moreClass).show()}if(e.afterCollapse){e.afterCollapse.call(t)}})}function b(t,n,r){if(t.collapseTimer){h=setTimeout(function(){y(t,n);if(e.isFunction(t.onCollapse)){t.onCollapse.call(r,false)}},t.collapseTimer)}}var n="init";if(typeof t==="string"){n=t;t={}}var r=e.extend({},e.expander.defaults,t),i=/^<(?:area|br|col|embed|hr|img|input|link|meta|param).*>$/i,s=r.wordEnd||/(&(?:[^;]+;)?|[a-zA-Z\u00C0-\u0100]+)$/,o=/<\/?(\w+)[^>]*>/g,u=/<(\w+)[^>]*>/g,a=/<\/(\w+)>/g,f=/(<\/[^>]+>)\s*$/,l=/^(<[^>]+>)+.?/,c=/\s\s+/g,h;var p=function(t){return e.trim(t||"").replace(c," ")};var d={init:function(){this.each(function(){var t,n,s,f,c,d,w,E,S,x,T,N,C,k,L=[],A=[],O={},M=this,_=e(this),D=e([]),P=e.extend({},r,_.data("expander")||e.meta&&_.data()||{}),H=!!_.find("."+P.detailClass).length,B=!!_.find("*").filter(function(){var t=e(this).css("display");return/^block|table|list/.test(t)}).length,j=B?"div":"span",F=j+"."+P.detailClass,I=P.moreClass+"",q=P.lessClass+"",R=P.expandSpeed||0,U=p(_.html()),z=p(_.text()),W=U.slice(0,P.slicePoint);P.moreSelector="span."+I.split(" ").join(".");P.lessSelector="span."+q.split(" ").join(".");if(e.data(this,"expanderInit")){return}e.data(this,"expanderInit",true);e.data(this,"expander",P);e.each(["onSlice","beforeExpand","afterExpand","onCollapse","afterCollapse"],function(t,n){O[n]=e.isFunction(P[n])});W=g(W);c=W.replace(o,"").length;while(c<P.slicePoint){f=U.charAt(W.length);if(f==="<"){f=U.slice(W.length).match(l)[0]}W+=f;c++}W=g(W,P.preserveWords);d=W.match(u)||[];w=W.match(a)||[];s=[];e.each(d,function(e,t){if(!i.test(t)){s.push(t)}});d=s;n=w.length;for(t=0;t<n;t++){w[t]=w[t].replace(a,"$1")}e.each(d,function(t,n){var r=n.replace(u,"$1");var i=e.inArray(r,w);if(i===-1){L.push(n);A.push("</"+r+">")}else{w.splice(i,1)}});A.reverse();if(!H){S=U.slice(W.length);x=e.trim(S.replace(o,""));if(x===""||x.split(/\s+/).length<P.widow){return}E=A.pop()||"";W+=A.join("");S=L.join("")+S}else{S=_.find(F).remove().html();W=_.html();U=W+S;E=""}P.moreLabel=_.find(P.moreSelector).length?"":m(P);if(B){S=U}W+=E;P.summary=W;P.details=W+S;P.lastCloseTag=E;if(O.onSlice){s=P.onSlice.call(M,P);P=s&&s.details?s:P}T=v(P,B);_.html(T);C=_.find(F);k=_.find(P.moreSelector);if(P.collapseEffect==="slideUp"&&P.expandEffect!=="slideDown"||_.is(":hidden")){C.css({display:"none"})}else{C[P.collapseEffect](0)}D=_.find("div."+P.summaryClass);N=function(e){e.preventDefault();k.hide();D.hide();if(O.beforeExpand){P.beforeExpand.call(M)}C.stop(false,true)[P.expandEffect](R,function(){C.css({zoom:""});if(O.afterExpand){P.afterExpand.call(M)}b(P,C,M)})};k.find("a").unbind("click.expander").bind("click.expander",N);if(P.userCollapse&&!_.find(P.lessSelector).length){_.find(F).append('<span class="'+P.lessClass+'">'+P.userCollapsePrefix+'<a href="#">'+P.userCollapseText+"</a></span>")}_.find(P.lessSelector+" a").unbind("click.expander").bind("click.expander",function(t){t.preventDefault();clearTimeout(h);var n=e(this).closest(F);y(P,n);if(O.onCollapse){P.onCollapse.call(M,true)}})})},destroy:function(){this.each(function(){var t,n,i=e(this);if(!i.data("expanderInit")){return}t=e.extend({},i.data("expander")||{},r);n=i.find("."+t.detailClass).contents();i.removeData("expanderInit");i.removeData("expander");i.find(t.moreSelector).remove();i.find("."+t.summaryClass).remove();i.find("."+t.detailClass).after(n).remove();i.find(t.lessSelector).remove()})}};if(d[n]){d[n].call(this)}return this};e.fn.expander.defaults=e.expander.defaults})(jQuery)
